<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <title>Driver Portal - Logixperts</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

  <style>
    :root {
      --bg: #020617;
      --card: #111827;
      --accent: #22c55e;
      --accent-soft: rgba(34,197,94,0.15);
      --text: #e5e7eb;
      --muted: #9ca3af;
      --border: #1f2937;
      --red: #ef4444;
      --blue: #3b82f6;
    }

    * { margin:0; padding:0; box-sizing:border-box; font-family:system-ui; }

    body {
      background: radial-gradient(circle at top, #111827, #020617 60%);
      color: var(--text);
      min-height: 100vh;
      padding: 20px;
    }

    /* LOGIN SCREEN */
    #loginScreen {
      position: fixed;
      inset:0;
      background: rgba(0,0,0,0.8);
      display:flex;
      justify-content:center;
      align-items:center;
      backdrop-filter: blur(4px);
    }

    .login-box {
      background: var(--card);
      padding: 25px;
      border-radius: 16px;
      width: 320px;
      border:1px solid var(--border);
      text-align:center;
    }
    .login-box input {
      width:100%;
      padding:10px;
      margin:8px 0;
      border-radius:8px;
      border:1px solid var(--border);
      background:#0f172a;
      color:white;
    }
    .login-btn {
      margin-top:10px;
      padding:10px;
      width:100%;
      background:var(--accent);
      border:none;
      cursor:pointer;
      border-radius:8px;
      font-weight:700;
    }

    /* HEADER */
    .header {
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:25px;
    }
    .logo { font-size:26px; font-weight:800; color:var(--accent); }

    .lang-box { display:flex; gap:6px; }
    .lang-btn {
      padding:6px 14px;
      border-radius:8px;
      background:var(--card);
      border:none;
      color:white;
    }
    .logout-btn {
      background:#dc2626;
      color:white;
      padding:6px 14px;
      border-radius:8px;
      cursor:pointer;
    }

    /* CARDS */
    .card {
      padding:22px;
      background:var(--card);
      border:1px solid var(--border);
      border-radius:18px;
      margin-bottom:20px;
    }
    .title { color:var(--accent); font-size:20px; font-weight:700; margin-bottom:12px; }

    /* GRID */
    .grid {
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:22px;
    }
    @media(max-width:800px) {
      .grid { grid-template-columns:1fr; }
    }

    /* MAP */
    #map { width:100%; height:260px; border-radius:12px; }

    /* UPDATE BUTTONS */
    .updates { display:flex; gap:10px; flex-wrap:wrap; }
    .update-btn {
      flex:1;
      padding:16px;
      border-radius:12px;
      text-align:center;
      cursor:pointer;
      background:var(--bg);
      border:1px solid var(--border);
      transition:0.2s;
    }
    .update-btn:hover { background:rgba(34,197,94,0.15); border-color:var(--accent); }

    /* CHAT */
    .chat-btn {
      margin-top:14px;
      padding:18px;
      background:var(--accent);
      border-radius:12px;
      text-align:center;
      font-weight:700;
      cursor:pointer;
      color:black;
    }

    /* TOAST */
    #toast {
      position:fixed;
      top:20px;
      right:20px;
      background:#22c55e;
      padding:12px 20px;
      border-radius:10px;
      display:none;
      color:black;
      font-weight:700;
    }
  </style>
</head>

<body>

<!-- LOGIN SCREEN -->
<div id="loginScreen">
  <div class="login-box">
    <h2 style="margin-bottom:10px;">Driver Login</h2>
    <input id="companyInput" placeholder="Company Code">
    <input id="driverInput" placeholder="Driver ID">
    <button class="login-btn" onclick="login()">Enter</button>
  </div>
</div>

<!-- TOAST -->
<div id="toast"></div>

<!-- HEADER -->
<div class="header">
  <div class="logo">LOGIXPERTS</div>
  <div class="lang-box">
    <button class="lang-btn">EN</button>
    <button class="lang-btn">ÿπÿ±ÿ®Ÿä</button>
    <button class="logout-btn" onclick="location.reload()">Logout</button>
  </div>
</div>

<!-- DRIVER CARD -->
<div class="card">
  <h2 class="title">Driver e1e</h2>
  <p>ID: e1e | Company: CSE</p>
  <div class="status-bar" id="statusBar" style="background:#166534;padding:14px;border-radius:12px;text-align:center;font-weight:600;">
    ‚úî Ready
  </div>
</div>

<div class="grid">
  <!-- CURRENT ASSIGNMENT -->
  <div class="card">
    <h2 class="title">üì¶ Current Assignment</h2>
    <p style="text-align:center;margin-top:60px;color:var(--muted);font-size:17px;">
      No active assignment<br>Waiting for dispatch...
    </p>
  </div>

  <!-- MAP -->
  <div class="card">
    <h2 class="title">üó∫Ô∏è Route Map</h2>
    <div id="map"></div>

    <div style="font-size:13px; margin-top:6px;">
      <span style="color:var(--blue)">‚óè</span> Your Location ‚Äî
      <span style="color:var(--red)">‚óè</span> Destination
    </div>
  </div>
</div>

<!-- UPDATE STATUS -->
<div class="card">
  <h2 class="title">‚ö° Update Status</h2>

  <div class="updates">
    <div class="update-btn" onclick="updateStatus('Arrived')">üìç Arrived</div>
    <div class="update-btn" onclick="updateStatus('Loaded')">‚úÖ Loaded</div>
    <div class="update-btn" onclick="updateStatus('Transit')">üöö Transit</div>
    <div class="update-btn" onclick="updateStatus('Done')">üèÅ Done</div>
  </div>

  <div class="chat-btn">üí¨ Chat with Dispatch</div>
</div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>

/////////////////////
// LOGIN SYSTEM
/////////////////////

function login() {
  let c = document.getElementById("companyInput").value.trim();
  let d = document.getElementById("driverInput").value.trim();

  if (c === "" || d === "") {
    alert("Please enter both fields.");
    return;
  }

  document.getElementById("loginScreen").style.display = "none";
}


/////////////////////
// MAP + ROUTE LINE
/////////////////////

const driverLat = 24.7136;  // Riyadh Example
const driverLng = 46.6753;

const destLat = 21.3891;   // Jeddah Example
const destLng = 39.8579;

// MAP INIT
const map = L.map('map').setView([driverLat, driverLng], 6);

// MAP TILES
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

// BLUE MARKER
L.marker([driverLat, driverLng], {
  icon: L.divIcon({
    html:`<div style="background:#3b82f6;width:16px;height:16px;border-radius:50%;border:3px solid white;"></div>`
  })
}).addTo(map).bindPopup("Your Location");

// RED MARKER
L.marker([destLat, destLng], {
  icon: L.divIcon({
    html:`<div style="background:#ef4444;width:16px;height:16px;border-radius:50%;border:3px solid white;"></div>`
  })
}).addTo(map).bindPopup("Destination");

// ROUTE LINE (REALISTIC)
L.polyline(
  [
    [driverLat, driverLng],
    [23.5, 45.2], // ŸÜŸÇÿ∑ÿ© Ÿàÿ≥ÿ∑ ÿßŸÑÿ∑ÿ±ŸäŸÇ
    [22.3, 41.8], // ŸÜŸÇÿ∑ÿ© ŸÇÿ®ŸÑ ÿ¨ÿØÿ©
    [destLat, destLng]
  ],
  {
    color: "#22c55e",
    weight: 4,
    opacity: 0.9
  }
).addTo(map);


/////////////////////
// STATUS UPDATE + TOAST
/////////////////////

function updateStatus(type) {
  const statusBar = document.getElementById("statusBar");
  const toast = document.getElementById("toast");

  let text = "";

  if (type === "Arrived") text = "‚úî ÿ™ŸÖ ÿßŸÑŸàÿµŸàŸÑ";
  if (type === "Loaded") text = "‚úî ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ";
  if (type === "Transit") text = "‚úî ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ";
  if (type === "Done") text = "‚úî ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑŸÖŸáŸÖÿ©";

  statusBar.textContent = text;

  toast.textContent = text;
  toast.style.display = "block";

  setTimeout(() => {
    toast.style.display = "none";
  }, 2500);
}

</script>

</body>
</html>
